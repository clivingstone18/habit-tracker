{"ast":null,"code":"var _jsxFileName = \"/Users/claire/Desktop/Projects/habittracker/habit-tracker/src/components/home.component.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport UserForm from \"./user-form.component\";\nimport Button from \"./button.component\";\nimport \"../home.css\";\nexport default function Home(props) {\n  const [isLoading, setIsLoading] = useState(true);\n  const [loginUsername, setLoginUsername] = useState(\"\");\n  const [loginPassword, setLoginPassword] = useState(\"\");\n  const [registerUsername, setRegisterUsername] = useState(\"\");\n  const [registerPassword, setRegisterPassword] = useState(\"\");\n  const [registerEmail, setRegisterEmail] = useState(\"\");\n  const [errors, setErrors] = useState({});\n  const [registering, setRegistering] = useState(false);\n  useEffect(() => {\n    let isMounted = true;\n\n    if (isMounted) {\n      props.checkLoginStatus();\n\n      if (props.isLoggedIn === \"LOGGED_IN\") {\n        props.history.push(\"/dashboard\");\n      }\n\n      setIsLoading(false);\n    }\n\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  const handleSuccessfulAuth = data => {\n    props.handleLogin(data);\n    setLoginUsername(\"\");\n    setLoginPassword(\"\");\n    setIsLoading(false);\n    props.history.push(\"/dashboard\");\n  };\n\n  const login = () => {\n    axios({\n      method: \"post\",\n      data: {\n        username: loginUsername,\n        password: loginPassword\n      },\n      withCredentials: true,\n      url: \"http://localhost:5000/login\"\n    }).then(res => {\n      if (res.data.status === \"Successfully Authenticated\") {\n        handleSuccessfulAuth(res.data);\n        setIsLoading(false);\n      }\n\n      if (res.data === \"No User Exists\") {\n        setErrors({\n          username: \"Incorrect username or password\"\n        });\n      }\n    }).catch(err => console.log(\"Failed\"));\n  };\n\n  const register = () => {\n    axios({\n      method: \"post\",\n      data: {\n        username: registerUsername,\n        password: registerPassword,\n        email: registerEmail\n      },\n      withCredentials: true,\n      url: \"http://localhost:5000/register\"\n    }).then(res => {\n      if (res.data.status === \"Successful Registration\") {\n        axios({\n          method: \"post\",\n          data: {\n            username: registerUsername,\n            password: registerPassword\n          },\n          withCredentials: true,\n          url: \"http://localhost:5000/login\"\n        }).then(res => {\n          console.log(res);\n\n          if (res.data.status === \"Successfully Authenticated\") {\n            handleSuccessfulAuth(res.data);\n          }\n        }).catch(err => console.log(\"Failed\"));\n      } else {\n        setErrors({\n          register: \"The username \" + registerUsername + \" has already been taken!\"\n        });\n      }\n    });\n  };\n\n  const changeStatus = val => {\n    setRegistering(val);\n  };\n\n  if (isLoading) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 12\n      }\n    }, \"Loading\");\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }\n    }, \"Welcome\"), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    }, \"Begin habit tracking with streaks, detailed statistics, and personalised insights\")), !registering ? /*#__PURE__*/React.createElement(UserForm, {\n      type: \"Login\",\n      username: loginUsername,\n      password: loginPassword,\n      setUsername: setLoginUsername,\n      setPassword: setLoginPassword,\n      handleClick: login,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }\n    }) : /*#__PURE__*/React.createElement(UserForm, {\n      type: \"Register\",\n      username: registerUsername,\n      password: registerPassword,\n      email: registerEmail,\n      setUsername: setRegisterUsername,\n      setPassword: setRegisterPassword,\n      setEmail: setRegisterEmail,\n      handleClick: register,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      buttonText: registering ? \"Login\" : \"Register\",\n      handleClick: changeStatus,\n      status: registering,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }\n    }), errors ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 19\n      }\n    }, errors.username) : null, errors ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 19\n      }\n    }, errors.register) : null);\n  }\n}","map":{"version":3,"sources":["/Users/claire/Desktop/Projects/habittracker/habit-tracker/src/components/home.component.js"],"names":["React","useState","useEffect","axios","UserForm","Button","Home","props","isLoading","setIsLoading","loginUsername","setLoginUsername","loginPassword","setLoginPassword","registerUsername","setRegisterUsername","registerPassword","setRegisterPassword","registerEmail","setRegisterEmail","errors","setErrors","registering","setRegistering","isMounted","checkLoginStatus","isLoggedIn","history","push","handleSuccessfulAuth","data","handleLogin","login","method","username","password","withCredentials","url","then","res","status","catch","err","console","log","register","email","changeStatus","val"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AACA,OAAO,aAAP;AAEA,eAAe,SAASC,IAAT,CAAcC,KAAd,EAAqB;AAClC,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BR,QAAQ,CAAC,IAAD,CAA1C;AACA,QAAM,CAACS,aAAD,EAAgBC,gBAAhB,IAAoCV,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACW,aAAD,EAAgBC,gBAAhB,IAAoCZ,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACa,gBAAD,EAAmBC,mBAAnB,IAA0Cd,QAAQ,CAAC,EAAD,CAAxD;AACA,QAAM,CAACe,gBAAD,EAAmBC,mBAAnB,IAA0ChB,QAAQ,CAAC,EAAD,CAAxD;AACA,QAAM,CAACiB,aAAD,EAAgBC,gBAAhB,IAAoClB,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACmB,MAAD,EAASC,SAAT,IAAsBpB,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACqB,WAAD,EAAcC,cAAd,IAAgCtB,QAAQ,CAAC,KAAD,CAA9C;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIsB,SAAS,GAAG,IAAhB;;AACA,QAAIA,SAAJ,EAAe;AACbjB,MAAAA,KAAK,CAACkB,gBAAN;;AACA,UAAIlB,KAAK,CAACmB,UAAN,KAAqB,WAAzB,EAAsC;AACpCnB,QAAAA,KAAK,CAACoB,OAAN,CAAcC,IAAd,CAAmB,YAAnB;AACD;;AACDnB,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD;;AACD,WAAO,MAAM;AACXe,MAAAA,SAAS,GAAG,KAAZ;AACD,KAFD;AAGD,GAZQ,EAYN,EAZM,CAAT;;AAcA,QAAMK,oBAAoB,GAAIC,IAAD,IAAU;AACrCvB,IAAAA,KAAK,CAACwB,WAAN,CAAkBD,IAAlB;AACAnB,IAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACAE,IAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACAJ,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACAF,IAAAA,KAAK,CAACoB,OAAN,CAAcC,IAAd,CAAmB,YAAnB;AACD,GAND;;AAQA,QAAMI,KAAK,GAAG,MAAM;AAClB7B,IAAAA,KAAK,CAAC;AACJ8B,MAAAA,MAAM,EAAE,MADJ;AAEJH,MAAAA,IAAI,EAAE;AACJI,QAAAA,QAAQ,EAAExB,aADN;AAEJyB,QAAAA,QAAQ,EAAEvB;AAFN,OAFF;AAMJwB,MAAAA,eAAe,EAAE,IANb;AAOJC,MAAAA,GAAG,EAAE;AAPD,KAAD,CAAL,CASGC,IATH,CASSC,GAAD,IAAS;AACb,UAAIA,GAAG,CAACT,IAAJ,CAASU,MAAT,KAAoB,4BAAxB,EAAsD;AACpDX,QAAAA,oBAAoB,CAACU,GAAG,CAACT,IAAL,CAApB;AACArB,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACD;;AACD,UAAI8B,GAAG,CAACT,IAAJ,KAAa,gBAAjB,EAAmC;AACjCT,QAAAA,SAAS,CAAC;AACRa,UAAAA,QAAQ,EAAE;AADF,SAAD,CAAT;AAGD;AACF,KAnBH,EAoBGO,KApBH,CAoBUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAY,QAAZ,CApBlB;AAqBD,GAtBD;;AAwBA,QAAMC,QAAQ,GAAG,MAAM;AACrB1C,IAAAA,KAAK,CAAC;AACJ8B,MAAAA,MAAM,EAAE,MADJ;AAEJH,MAAAA,IAAI,EAAE;AACJI,QAAAA,QAAQ,EAAEpB,gBADN;AAEJqB,QAAAA,QAAQ,EAAEnB,gBAFN;AAGJ8B,QAAAA,KAAK,EAAE5B;AAHH,OAFF;AAOJkB,MAAAA,eAAe,EAAE,IAPb;AAQJC,MAAAA,GAAG,EAAE;AARD,KAAD,CAAL,CASGC,IATH,CASSC,GAAD,IAAS;AACf,UAAIA,GAAG,CAACT,IAAJ,CAASU,MAAT,KAAoB,yBAAxB,EAAmD;AACjDrC,QAAAA,KAAK,CAAC;AACJ8B,UAAAA,MAAM,EAAE,MADJ;AAEJH,UAAAA,IAAI,EAAE;AACJI,YAAAA,QAAQ,EAAEpB,gBADN;AAEJqB,YAAAA,QAAQ,EAAEnB;AAFN,WAFF;AAMJoB,UAAAA,eAAe,EAAE,IANb;AAOJC,UAAAA,GAAG,EAAE;AAPD,SAAD,CAAL,CASGC,IATH,CASSC,GAAD,IAAS;AACbI,UAAAA,OAAO,CAACC,GAAR,CAAYL,GAAZ;;AACA,cAAIA,GAAG,CAACT,IAAJ,CAASU,MAAT,KAAoB,4BAAxB,EAAsD;AACpDX,YAAAA,oBAAoB,CAACU,GAAG,CAACT,IAAL,CAApB;AACD;AACF,SAdH,EAeGW,KAfH,CAeUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAY,QAAZ,CAflB;AAgBD,OAjBD,MAiBO;AACLvB,QAAAA,SAAS,CAAC;AACRwB,UAAAA,QAAQ,EACN,kBAAkB/B,gBAAlB,GAAqC;AAF/B,SAAD,CAAT;AAID;AACF,KAjCD;AAkCD,GAnCD;;AAqCA,QAAMiC,YAAY,GAAIC,GAAD,IAAS;AAC5BzB,IAAAA,cAAc,CAACyB,GAAD,CAAd;AACD,GAFD;;AAIA,MAAIxC,SAAJ,EAAe;AACb,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAP;AACD,GAFD,MAEO;AACL,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2FAFF,CADF,EASG,CAACc,WAAD,gBACC,oBAAC,QAAD;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,QAAQ,EAAEZ,aAFZ;AAGE,MAAA,QAAQ,EAAEE,aAHZ;AAIE,MAAA,WAAW,EAAED,gBAJf;AAKE,MAAA,WAAW,EAAEE,gBALf;AAME,MAAA,WAAW,EAAEmB,KANf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,gBAUC,oBAAC,QAAD;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,QAAQ,EAAElB,gBAFZ;AAGE,MAAA,QAAQ,EAAEE,gBAHZ;AAIE,MAAA,KAAK,EAAEE,aAJT;AAKE,MAAA,WAAW,EAAEH,mBALf;AAME,MAAA,WAAW,EAAEE,mBANf;AAOE,MAAA,QAAQ,EAAEE,gBAPZ;AAQE,MAAA,WAAW,EAAE0B,QARf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAnBJ,eA+BE,oBAAC,MAAD;AACE,MAAA,UAAU,EAAEvB,WAAW,GAAG,OAAH,GAAa,UADtC;AAEE,MAAA,WAAW,EAAEyB,YAFf;AAGE,MAAA,MAAM,EAAEzB,WAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA/BF,EAqCGF,MAAM,gBAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAIA,MAAM,CAACc,QAAX,CAAH,GAA8B,IArCvC,EAsCGd,MAAM,gBAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAIA,MAAM,CAACyB,QAAX,CAAH,GAA8B,IAtCvC,CADF;AA0CD;AACF","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport UserForm from \"./user-form.component\";\nimport Button from \"./button.component\";\nimport \"../home.css\";\n\nexport default function Home(props) {\n  const [isLoading, setIsLoading] = useState(true);\n  const [loginUsername, setLoginUsername] = useState(\"\");\n  const [loginPassword, setLoginPassword] = useState(\"\");\n  const [registerUsername, setRegisterUsername] = useState(\"\");\n  const [registerPassword, setRegisterPassword] = useState(\"\");\n  const [registerEmail, setRegisterEmail] = useState(\"\");\n  const [errors, setErrors] = useState({});\n  const [registering, setRegistering] = useState(false);\n\n  useEffect(() => {\n    let isMounted = true;\n    if (isMounted) {\n      props.checkLoginStatus();\n      if (props.isLoggedIn === \"LOGGED_IN\") {\n        props.history.push(\"/dashboard\");\n      }\n      setIsLoading(false);\n    }\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  const handleSuccessfulAuth = (data) => {\n    props.handleLogin(data);\n    setLoginUsername(\"\");\n    setLoginPassword(\"\");\n    setIsLoading(false);\n    props.history.push(\"/dashboard\");\n  };\n\n  const login = () => {\n    axios({\n      method: \"post\",\n      data: {\n        username: loginUsername,\n        password: loginPassword,\n      },\n      withCredentials: true,\n      url: \"http://localhost:5000/login\",\n    })\n      .then((res) => {\n        if (res.data.status === \"Successfully Authenticated\") {\n          handleSuccessfulAuth(res.data);\n          setIsLoading(false);\n        }\n        if (res.data === \"No User Exists\") {\n          setErrors({\n            username: \"Incorrect username or password\",\n          });\n        }\n      })\n      .catch((err) => console.log(\"Failed\"));\n  };\n\n  const register = () => {\n    axios({\n      method: \"post\",\n      data: {\n        username: registerUsername,\n        password: registerPassword,\n        email: registerEmail,\n      },\n      withCredentials: true,\n      url: \"http://localhost:5000/register\",\n    }).then((res) => {\n      if (res.data.status === \"Successful Registration\") {\n        axios({\n          method: \"post\",\n          data: {\n            username: registerUsername,\n            password: registerPassword,\n          },\n          withCredentials: true,\n          url: \"http://localhost:5000/login\",\n        })\n          .then((res) => {\n            console.log(res);\n            if (res.data.status === \"Successfully Authenticated\") {\n              handleSuccessfulAuth(res.data);\n            }\n          })\n          .catch((err) => console.log(\"Failed\"));\n      } else {\n        setErrors({\n          register:\n            \"The username \" + registerUsername + \" has already been taken!\",\n        });\n      }\n    });\n  };\n\n  const changeStatus = (val) => {\n    setRegistering(val);\n  };\n\n  if (isLoading) {\n    return <p>Loading</p>;\n  } else {\n    return (\n      <div>\n        <div className=\"header\">\n          <h1>Welcome</h1>\n          <h2>\n            Begin habit tracking with streaks, detailed statistics, and\n            personalised insights\n          </h2>\n        </div>\n\n        {!registering ? (\n          <UserForm\n            type=\"Login\"\n            username={loginUsername}\n            password={loginPassword}\n            setUsername={setLoginUsername}\n            setPassword={setLoginPassword}\n            handleClick={login}\n          />\n        ) : (\n          <UserForm\n            type=\"Register\"\n            username={registerUsername}\n            password={registerPassword}\n            email={registerEmail}\n            setUsername={setRegisterUsername}\n            setPassword={setRegisterPassword}\n            setEmail={setRegisterEmail}\n            handleClick={register}\n          />\n        )}\n\n        <Button\n          buttonText={registering ? \"Login\" : \"Register\"}\n          handleClick={changeStatus}\n          status={registering}\n        />\n\n        {errors ? <p>{errors.username}</p> : null}\n        {errors ? <p>{errors.register}</p> : null}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}